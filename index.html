<!DOCTYPE html>
<html>
<head>
  <title>Smart Irrigation</title>
</head>
<body>

<h1>Smart Irrigation System</h1>

<h2>Soil Moisture: <span id="moisture">Loading...</span>%</h2>

<button onclick="turnOn()">Motor ON</button>
<button onclick="turnOff()">Motor OFF</button>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, onValue, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "dipthen-fb56b.firebaseapp.com",
  databaseURL: "https://dipthen-fb56b-default-rtdb.firebaseio.com",
  projectId: "dipthen-fb56b",
  storageBucket: "dipthen-fb56b.firebasestorage.app",
  messagingSenderId: "225383723586",
  appId: "1:225383723586:web:15e000717e1dfd8be533db"
};

const app = initializeApp(firebaseConfig);
const database = getDatabase(app);

// Read Soil Moisture
const moistureRef = ref(database, 'soilMoisture');
onValue(moistureRef, (snapshot) => {
  document.getElementById("moisture").innerText = snapshot.val();
});

// Motor Control
window.turnOn = function() {
  set(ref(database, 'motorStatus'), "ON");
}

window.turnOff = function() {
  set(ref(database, 'motorStatus'), "OFF");
}

</script>

</body>
</html>
